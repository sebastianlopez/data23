"use strict";!function(a){"use strict";function e(){function e(){$("#btn-send-rd").on("click",function(a){a.preventDefault(),$("#send_demo").submit()})}function o(){$("#send_demo").on("submit",function(a){a.preventDefault();var e=$("#email_to_rd").val(),o=$("#send_demo_to_rd").val();$.ajax({type:"POST",url:b.url_domain+"save-demo-rdstation",data:{email:e,send_demo_to_rd:o},success:function(a){$("#flag_crm_demo").val(1)}})})}function l(){$("#popup_2").on("submit",function(a){a.preventDefault(),grecaptcha.ready(function(){grecaptcha.execute(b.key_site_captcha,{action:"popup_2"}).then(function(a){r(a)})})})}function r(a){var e=$("#nombre").val(),o=$("#telefono").val(),l=$("#ciudad").val(),r=$("#usuarios").val(),i=$("#mobileFlag_crm").val();$.ajax({type:"GET",url:b.url_domain+"validate-mandatory-popup",data:{nombre:e,telefono:o,ciudad:l,usuarios:r},success:function(e){if($("#gif_loader_demo").fadeOut(),$("#gif_loader_demo_mobile").fadeOut(),e.success)t(a);else{var o="";$.each(e.result,function(a,e){o+="<li>"+e+"</li>"}),$("#errorsFormInfo ul").html(o),$("#errorsFormInfo").css("display","block"),"mobile"!=i&&$("#modalCrmData").modal("show")}}})}function t(e){$("#gif_loader_demo").fadeIn(),$("#gif_loader_demo_mobile").fadeIn(),"mobile"!=$("#mobileFlag_crm").val()&&$("#modalCrmData").modal("hide"),$("#errorsFormInfo").css("display","none");var o=setInterval(function(){if($("#popup_2").find("button").attr("disabled",!0),""!=$("#flag_crm").val()&&""!=$("#flag_crm_demo").val()){clearInterval(o);var l=$("#nombre").val(),r=$("#telefono").val(),t=$("#ciudad").val(),i=$("#usuarios").val(),p=$("#sector").val(),n=$("#company_crm").val(),c=$("#email_crm").val(),s=$("#average_sale").val(),m=$("#companydemo_crm").val(),d=$("#gclid_crm").val(),v=$("#description_crm").val(),g=$("#campaignid_crm").val(),h=$("#mobileFlag_crm").val(),g=$("[name='Campaña']").val(),y=$("#password_to_rd").val();$("#name").val(l),$.ajax({type:"GET",url:b.url_domain+"save-demo-info",data:{password_new:y,identificador:$("form").attr("id"),page_title:document.title,form_url:document.location.hostname,nombre:l,telefono:r,ciudad:t,usuarios:i,sector:p,company:n,email:c,average_sale:s,ad_gclid:d,companydemo:m,description:v,campaignid:g,tokenreCAPTCHA:e},success:function(e){if($("#gif_loader_demo").fadeOut(),$("#gif_loader_demo_mobile").fadeOut(),$("#popup_2").find("button").attr("disabled",!1),e.success)if($("#nombre").val(""),$("#telefono").val(""),$("#ciudad").val(""),"mobile"==h)try{"android"==u()?Android.loadDemo(n):"ios"==u()&&webkit.messageHandlers.demoAction.postMessage(n)}catch(a){}else f()?_():a.location=$("#flag_crm").val();else{var o="";$.each(e.result,function(a,e){o+="<li>"+e+"</li>"}),$("#errorsFormInfo ul").html(o),$("#errorsFormInfo").css("display","block"),"mobile"!=h&&$("#modalCrmData").modal("show")}}})}},3e3)}function i(){$("#popup_1.f1").on("submit",function(a){a.preventDefault(),p()})}function p(){$("#popup_1.f1 #errorsFormDemo").css("display","none"),$("#popup_1.f1").find("button").attr("disabled",!0);var a=$("#popup_1.f1 #email").val(),e=$("#popup_1.f1 #company").val();e=e.replace("&","");var o=$("#popup_1.f1 #ad_gclib").val(),l=$("#campaign").val(),r=$("#campaignid").val(),t=$("#popup_1.f1 #sector").val(),i=$("#popup_1 [name='_token']").val();$("#empresa").val(e),$('input[name="Nombre de la Empresa"]').val(e);var p=$("#popup_1.f1 .captcha").val(),n=$("#popup_1.f1 .captchaNumberOne").val(),c=$("#popup_1.f1 .captchaNumberTwo").val();$.ajax({type:"POST",dataType:"json",url:b.url_domain+"find-demo",data:{_token:i,email:a,company:e,gclid:o,campaign:l,sector:t,captcha:p,captchaNumberOne:n,captchaNumberTwo:c},beforeSend:function(){$("#gif_loader1").fadeIn(),$("#popup_1.f1").find("button").attr("disabled",!0)},success:function(i){if($("#gif_loader1").fadeOut(),$("#popup_1.f1").find("button").attr("disabled",!1),i.success)"robot"==i.success?($("#popup_1.f1 #errorsFormDemo ul").html(i.result),$("#popup_1.f1 #errorsFormDemo").css("display","block")):"showPopup"==i.success?($("#duplicateEmail").show(),$("#flag_crm").val(),crm=i.result.url+"?email="+i.result.email,recover_password=i.result.url+"?user_name="+i.result.user_name+"&email="+i.result.email+"&demo=1",$("#access_crm").attr("href",crm),$("#recover_password").attr("href",recover_password),$("#modalemail").modal("show")):($("#popup_1.f1 #email").val(""),$("#popup_1.f1 #company").val(""),redirecCreateCrm(a,e,o,i.result,l,r,t,mobileFlag=""));else{var p="";$.each(i.result,function(a,e){p+="<li>"+e+"</li>"}),$("#popup_1.f1 #errorsFormDemo ul").html(p),$("#popup_1.f1 #errorsFormDemo").css("display","block")}}})}function n(){$("#popup_1.f2").on("submit",function(a){a.preventDefault(),c()})}function c(){$("#popup_1.f2 #errorsFormDemo").css("display","none"),$("#popup_1.f2").find("button").attr("disabled",!0);var a=$("#popup_1.f2 #email").val(),e=$("#popup_1.f2 #company").val();e=e.replace("&","");var o=($("#companydemo_crm").val(),$("#popup_1.f2 #ad_gclib").val()),l=$("#campaign").val(),r=$("#campaignid").val(),t=$("#popup_1.f2 #sector").val(),i=$("#popup_1 [name='_token']").val(),p=$("#popup_1.f2 #mobileFlag").val(),n=$("#popup_1.f2 .captcha").val(),c=$("#popup_1.f2 .captchaNumberOne").val(),s=$("#popup_1.f2 .captchaNumberTwo").val();$("#empresa").val(e),$('input[name="Nombre de la Empresa"]').val(e),$.ajax({type:"POST",dataType:"json",url:b.url_domain+"find-demo",data:{_token:i,email:a,company:e,gclid:o,campaign:l,sector:t,captcha:n,captchaNumberOne:c,captchaNumberTwo:s},beforeSend:function(){$("#gif_loader2").fadeIn(),$("#popup_1.f2").find("button").attr("disabled",!0)},success:function(i){if($("#gif_loader2").fadeOut(),$("#popup_1.f2").find("button").attr("disabled",!1),i.success)if("robot"==i.success)$("#popup_1.f2 #errorsFormDemo ul").html(i.result),$("#popup_1.f2 #errorsFormDemo").css("display","block");else if("showPopup"==i.success)if($("#duplicateEmail").show(),"mobile"==p)try{"android"==u()?$("#access_crm").on("click",function(){Android.loadDemo(i.result.crm)}):"ios"==u()&&$("#access_crm").on("click",function(){webkit.messageHandlers.demoAction.postMessage(i.result.crm)})}catch(a){}else $("#flag_crm").val(),crm=i.result.url+"?email="+i.result.email,recover_password=i.result.url+"?user_name="+i.result.user_name+"&email="+i.result.email+"&demo=1",$("#access_crm").attr("href",crm),$("#recover_password").attr("href",recover_password),$("#modalemail").modal("show");else $("#popup_1.f2 #email").val(""),$("#popup_1.f2 #company").val(""),redirecCreateCrm(a,e,o,i.result,l,r,t,p);else{var n="";$.each(i.result,function(a,e){n+="<li>"+e+"</li>"}),$("#popup_1.f2 #errorsFormDemo ul").html(n),$("#popup_1.f2 #errorsFormDemo").css("display","block")}}})}function s(){$("#popup_1mobile.f2").on("submit",function(a){$("#popup_1mobile.f2 #errorsFormDemo").css("display","none"),a.preventDefault(),$("#popup_1mobile.f2").find("button").attr("disabled",!0);var e=$("#popup_1mobile.f2 #email").val(),o=$("#popup_1mobile.f2 #company").val();o=o.replace("&","");var l=$("#popup_1mobile.f2 #ad_gclib").val(),r=$("#campaign").val(),t=$("[name='Campaña']").val(),i=$("#popup_1mobile.f2 #sector").val(),p=$("#popup_1 [name='_token']").val(),n=$("#popup_1mobile.f2 #mobileFlag").val();$("#empresa").val(o),$('input[name="Nombre de la Empresa"]').val(o),$.ajax({type:"POST",dataType:"json",url:b.url_domain+"find-demo",data:{_token:p,email:e,company:o,gclid:l,campaign:t,sector:i},beforeSend:function(){$("#gif_loader2").fadeIn(),$("#popup_1mobile.f2").find("button").attr("disabled",!0)},success:function(a){if($("#gif_loader2").fadeOut(),$("#popup_1mobile.f2").find("button").attr("disabled",!1),a.success)if("showPopup"==a.success){if($("#contact").hide(),$("#duplicateEmail").show(),"mobile"==n)try{"android"==u()?$("#access_crm").on("click",function(){Android.loadDemo(e,a.result.crm)}):"ios"==u()&&$("#access_crm").on("click",function(){webkit.messageHandlers.demoAction.postMessage(e)})}catch(a){console.log("The native context does not exist yet")}}else $("#popup_1mobile.f2 #email").val(""),$("#popup_1mobile.f2 #company").val(""),redirecCreateCrm(e,o,l,a.result,r,t,i,n);else{var p="";$.each(a.result,function(a,e){p+="<li>"+e+"</li>"}),$("#popup_1mobile.f2 #errorsFormDemo ul").html(p),$("#popup_1mobile.f2 #errorsFormDemo").css("display","block")}}})})}function m(){$("#popup_2mobile").on("submit",function(e){e.preventDefault(),$("#gif_loader_demo").fadeIn(),$("#gif_loader_demo_mobile").fadeIn(),"mobile"!=$("#mobileFlag_crm").val()&&$("#modalCrmData").modal("hide"),$("#errorsFormInfo").css("display","none");var o=setInterval(function(){if($("#popup_2mobile").find("button").attr("disabled",!0),""!=$("#flag_crm").val()&&""!=$("#flag_crm_demo").val()){clearInterval(o);var e=$("#nombre").val(),l=$("#telefono").val(),r=$("#ciudad").val(),t=$("#usuarios").val(),i=$("#sector").val(),p=$("#company_crm").val(),n=$("#email_crm").val(),c=($("#send_demo_to_rd").val(),$("#gclid_crm").val()),s=$("#description_crm").val(),m=$("input[name='Campaña']").val(),d=$("#mobileFlag_crm").val();$("input[name='new_password']").val();$("#name").val(e),$.ajax({type:"GET",url:b.url_domain+"save-demo-info",data:{type_extern:"app",nombre:e,telefono:l,ciudad:r,usuarios:t,sector:i,company:p,email:n,ad_gclid:c,companydemo:$("#send_demo_to_rd").val(),description:s,campaignid:m},success:function(e){if($("#gif_loader_demo").fadeOut(),$("#gif_loader_demo_mobile").fadeOut(),$("#popup_2mobile").find("button").attr("disabled",!1),e.success)if($("#nombre").val(""),$("#telefono").val(""),$("#ciudad").val(""),"mobile"==d)try{"android"==u()?Android.loadDemo(n,e.crm):"ios"==u()&&webkit.messageHandlers.demoAction.postMessage(n)}catch(a){console.log("The native context does not exist yet")}else f()?_():a.location=$("#flag_crm").val();else{var o="";$.each(e.result,function(a,e){o+="<li>"+e+"</li>"}),$("#errorsFormInfo ul").html(o),$("#errorsFormInfo").css("display","block"),"mobile"!=d&&$("#modalCrmData").modal("show")}}})}},3e3)})}function d(){$("#campaignid_crm").val()&&$("#campaign").val($("#campaignid_crm").val())}function u(){return"https://play.google.com/store/apps/details?id=com.datacrm.application"==f()?"android":"https://itunes.apple.com/us/app/datacrm/id1437186766?mt=8"==f()?"ios":"web"}function f(){return userAgent=navigator.userAgent||navigator.vendor||a.opera,url_app=null,/android/i.test(userAgent)&&(url_app="https://play.google.com/store/apps/details?id=com.datacrm.application"),/iPad|iPhone|iPod/.test(userAgent)&&!a.MSStream&&(url_app="https://itunes.apple.com/us/app/datacrm/id1437186766?mt=8"),$("#descarga_app").attr("href",url_app||""),url_app}function _(){f()&&$("#modalMobile").modal("show")}var v={};v.init=function(){g()};var b={url_domain:"pruebas.datacrm.la"==a.location.hostname?"https://pruebas.datacrm.la/webpage/public/":"https://www.datacrm.com/",key_site_captcha:"6LdGdPkaAAAAAICNuY4FEbRr0tAkDg9I_CgSI3Cf"},g=function(){e(),o(),l(),i(),n(),s(),m(),d()};return v}void 0===a.demos&&(a.demos=e())}(window),$(document).ready(function(){demos.init({})});